{"ast":null,"code":"import { create } from 'zustand';\nimport { authAPI } from '../api/client';\nexport const useAuthStore = create(set => ({\n  user: null,\n  token: localStorage.getItem('token'),\n  isLoading: false,\n  error: null,\n  setUser: user => set({\n    user\n  }),\n  setToken: token => {\n    if (token) {\n      localStorage.setItem('token', token);\n    } else {\n      localStorage.removeItem('token');\n    }\n    set({\n      token\n    });\n  },\n  setError: error => set({\n    error\n  }),\n  setLoading: loading => set({\n    isLoading: loading\n  }),\n  register: async data => {\n    set({\n      isLoading: true,\n      error: null\n    });\n    try {\n      const response = await authAPI.register(data);\n      const {\n        token,\n        refreshToken,\n        user\n      } = response.data;\n      set({\n        token,\n        user,\n        isLoading: false\n      });\n      localStorage.setItem('token', token);\n      localStorage.setItem('refreshToken', refreshToken);\n      return response.data;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      const errorMsg = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Registration failed';\n      set({\n        error: errorMsg,\n        isLoading: false\n      });\n      throw error;\n    }\n  },\n  login: async data => {\n    set({\n      isLoading: true,\n      error: null\n    });\n    try {\n      const response = await authAPI.login(data);\n      const {\n        token,\n        refreshToken,\n        user\n      } = response.data;\n      set({\n        token,\n        user,\n        isLoading: false\n      });\n      localStorage.setItem('token', token);\n      localStorage.setItem('refreshToken', refreshToken);\n      return response.data;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      const errorMsg = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Login failed';\n      set({\n        error: errorMsg,\n        isLoading: false\n      });\n      throw error;\n    }\n  },\n  logout: () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('refreshToken');\n    set({\n      user: null,\n      token: null\n    });\n  },\n  fetchProfile: async () => {\n    set({\n      isLoading: true\n    });\n    try {\n      const response = await authAPI.getProfile();\n      set({\n        user: response.data,\n        isLoading: false\n      });\n      return response.data;\n    } catch (error) {\n      set({\n        error: 'Failed to fetch profile',\n        isLoading: false\n      });\n      throw error;\n    }\n  },\n  updateProfile: async data => {\n    set({\n      isLoading: true,\n      error: null\n    });\n    try {\n      const response = await authAPI.updateProfile(data);\n      set({\n        user: response.data,\n        isLoading: false\n      });\n      return response.data;\n    } catch (error) {\n      set({\n        error: 'Failed to update profile',\n        isLoading: false\n      });\n      throw error;\n    }\n  },\n  isAuthenticated: () => {\n    const token = localStorage.getItem('token');\n    return !!token;\n  }\n}));","map":{"version":3,"names":["create","authAPI","useAuthStore","set","user","token","localStorage","getItem","isLoading","error","setUser","setToken","setItem","removeItem","setError","setLoading","loading","register","data","response","refreshToken","_error$response","_error$response$data","errorMsg","message","login","_error$response2","_error$response2$data","logout","fetchProfile","getProfile","updateProfile","isAuthenticated"],"sources":["C:/mawa3id/frontend/src/store/authStore.js"],"sourcesContent":["import { create } from 'zustand';\r\nimport { authAPI } from '../api/client';\r\n\r\nexport const useAuthStore = create((set) => ({\r\n  user: null,\r\n  token: localStorage.getItem('token'),\r\n  isLoading: false,\r\n  error: null,\r\n\r\n  setUser: (user) => set({ user }),\r\n  setToken: (token) => {\r\n    if (token) {\r\n      localStorage.setItem('token', token);\r\n    } else {\r\n      localStorage.removeItem('token');\r\n    }\r\n    set({ token });\r\n  },\r\n  setError: (error) => set({ error }),\r\n  setLoading: (loading) => set({ isLoading: loading }),\r\n\r\n  register: async (data) => {\r\n    set({ isLoading: true, error: null });\r\n    try {\r\n      const response = await authAPI.register(data);\r\n      const { token, refreshToken, user } = response.data;\r\n      set({\r\n        token,\r\n        user,\r\n        isLoading: false,\r\n      });\r\n      localStorage.setItem('token', token);\r\n      localStorage.setItem('refreshToken', refreshToken);\r\n      return response.data;\r\n    } catch (error) {\r\n      const errorMsg = error.response?.data?.message || 'Registration failed';\r\n      set({ error: errorMsg, isLoading: false });\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  login: async (data) => {\r\n    set({ isLoading: true, error: null });\r\n    try {\r\n      const response = await authAPI.login(data);\r\n      const { token, refreshToken, user } = response.data;\r\n      set({\r\n        token,\r\n        user,\r\n        isLoading: false,\r\n      });\r\n      localStorage.setItem('token', token);\r\n      localStorage.setItem('refreshToken', refreshToken);\r\n      return response.data;\r\n    } catch (error) {\r\n      const errorMsg = error.response?.data?.message || 'Login failed';\r\n      set({ error: errorMsg, isLoading: false });\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  logout: () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('refreshToken');\r\n    set({ user: null, token: null });\r\n  },\r\n\r\n  fetchProfile: async () => {\r\n    set({ isLoading: true });\r\n    try {\r\n      const response = await authAPI.getProfile();\r\n      set({ user: response.data, isLoading: false });\r\n      return response.data;\r\n    } catch (error) {\r\n      set({ error: 'Failed to fetch profile', isLoading: false });\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  updateProfile: async (data) => {\r\n    set({ isLoading: true, error: null });\r\n    try {\r\n      const response = await authAPI.updateProfile(data);\r\n      set({ user: response.data, isLoading: false });\r\n      return response.data;\r\n    } catch (error) {\r\n      set({ error: 'Failed to update profile', isLoading: false });\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  isAuthenticated: () => {\r\n    const token = localStorage.getItem('token');\r\n    return !!token;\r\n  },\r\n}));\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}